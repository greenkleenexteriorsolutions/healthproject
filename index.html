<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Health Tracker — Operator</title>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<style>*{box-sizing:border-box;margin:0;padding:0}body{background:#0a0a0a}</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel" data-presets="react">

const { useState, useEffect, useCallback } = React;
const SK = "health-chris-2026";

const TODAY = (function() {
  var d = new Date();
  return d.getFullYear() + "-" + String(d.getMonth()+1).padStart(2,"0") + "-" + String(d.getDate()).padStart(2,"0");
})();

const DOY = Math.max(1, Math.floor((new Date() - new Date(2026,0,1)) / 86400000) + 1);

const MENTZER = [
  { id:"d1", label:"Day 1", muscle:"CHEST + BACK", color:"#e85d3a", exercises:[
    { name:"Pec Dec",              repRange:"6-10",  prev:"207.5lbs@6",  flag:"Week 4 dropped to 185 — confirm warmup" },
    { name:"Incline Press (SS)",   repRange:"1-3",   prev:"175lbs@3",    flag:"Volatile history — standardize grip/warmup" },
    { name:"Close Grip Pulldowns", repRange:"6-10",  prev:"215lbs@6",    flag:null },
    { name:"Deadlifts",            repRange:"5-8",   prev:"275lbs@6",    flag:"Grip limiting. Add farmer carries on rest day." },
  ]},
  { id:"d2", label:"Day 2", muscle:"LEGS A", color:"#3aab5d", exercises:[
    { name:"Leg Extensions",       repRange:"8-15",  prev:"187.5lbs@15", flag:null },
    { name:"Leg Press (SS)",       repRange:"8-15",  prev:"380lbs@20",   flag:"PLATEAU at 380. Push to 400+ next session." },
    { name:"Standing Calf Raises", repRange:"12-20", prev:"345lbs@10",   flag:"PLATEAU. Use rest-pause or drop set." },
  ]},
  { id:"d3", label:"Day 3", muscle:"DELTS + ARMS", color:"#5d7de8", exercises:[
    { name:"Seated DB Press",          repRange:"6-10", prev:"55lbs@7",   flag:"PRIORITY — underdeveloped vs chest. Move up fast." },
    { name:"Bent Over Laterals (SS)",  repRange:"6-10", prev:"160lbs@6",  flag:"Sub: Reverse Pec Dec. Good progression." },
    { name:"Barbell Curls",            repRange:"6-10", prev:"60lbs@21",  flag:"Weight too light. Jump to 75-80lbs for true failure." },
    { name:"Tricep Pressdowns",        repRange:"6-10", prev:"82.5lbs@7", flag:"V-bar. Standardize weight each session." },
    { name:"Weighted Dips (SS)",       repRange:"3-5",  prev:"50lbs@3",   flag:null },
  ]},
  { id:"d4", label:"Day 4", muscle:"LEGS B", color:"#c8a832", exercises:[
    { name:"Romanian Deadlift",         repRange:"6-10",  prev:"205lbs@8",   flag:"Experiment block. Log consistently now." },
    { name:"Leg Ext Static Hold",       repRange:"10-25s",prev:"225lbs@25s", flag:"+30lbs over Day 2 weight. Good progression." },
    { name:"Smith Machine Squats (SS)", repRange:"8-15",  prev:"255lbs@11",  flag:"Week 3 was sick — clean data now." },
    { name:"Standing Calf Raises",      repRange:"12-20", prev:"345lbs@12",  flag:"Same plateau as D2 calves." },
  ]},
];

const SUPPS = ["Creatine 6g","Zinc","Vitamin D","Mag Glycinate","Omega-3"];

const CHECKS = [
  { id:"stretch", label:"Nightly Stretch", icon:"Stretch", sub:"splits by Dec 31" },
  { id:"bible",   label:"Bible 15 min",    icon:"Bible",   sub:"full read Dec 31" },
  { id:"sleep",   label:"Sleep 7-8h",      icon:"Sleep",   sub:"Non-negotiable" },
];

const MFIELDS = [
  { id:"weight", label:"Weight",    unit:"lbs", base:181 },
  { id:"arm",    label:"Arms",      unit:"in",  base:15  },
  { id:"chest",  label:"Chest",     unit:"in",  base:42  },
  { id:"waist",  label:"Waist",     unit:"in",  base:33  },
  { id:"legs",   label:"Legs",      unit:"in",  base:22  },
  { id:"neck",   label:"Neck",      unit:"in",  base:17  },
];

const DR_ALERTS = [
  { id:"uric",   sev:"warn", title:"Uric Acid Watch",
    body:"Filipino genetics carry 2-3x higher risk of hyperuricemia. Your 80/20 ground beef is purine-dense. If you experience joint swelling or stiffness especially big toe — stop red meat 48h, push water, see a doctor. Blood panel every 3 months including uric acid." },
  { id:"delts",  sev:"warn", title:"Shoulder Imbalance",
    body:"Chest pressing far more than shoulders. This leads to rotator cuff impingement within 6-12 months if uncorrected. DB shoulder press is your #1 priority on Day 3. Track and progress it religiously." },
  { id:"grip",   sev:"info", title:"Grip Strength Gap",
    body:"Deadlifts capped by grip at 275. Your back can pull more. Fix: 2 min farmer carries or wrist curls on any rest day. No equipment needed. This unlocks your deadlift fast." },
  { id:"curls",  sev:"info", title:"Bicep Underloaded",
    body:"60lbs for 20+ reps is not Mentzer. You need 75-80lbs failing at rep 8. Move the weight up immediately." },
  { id:"greens", sev:"info", title:"Missing Micronutrients",
    body:"Meat + eggs + milk misses folate and vitamin K. Add spinach or kale to 3 meals per week. 30 seconds, zero effort, high return." },
  { id:"cal",    sev:"info", title:"Calorie Calibration",
    body:"Garmin overestimates TDEE 10-15%. Real TDEE is 2200-2300. Target 2400-2550 cal/day for slow bulk. If gaining more than 1lb/week for 2 weeks, drop 100 cal." },
];

function freshData() {
  return {
    checks:{}, supps:{}, workouts:{},
    measures:[
      { date:"2025-11-27", weight:181, arm:15, chest:42, waist:33, legs:22, neck:17 },
      { date:"2026-02-02", weight:186 },
    ],
    nextDay:"d1",
    nutrition:{},
  };
}

function fmtDate(d) {
  return d.getFullYear() + "-" + String(d.getMonth()+1).padStart(2,"0") + "-" + String(d.getDate()).padStart(2,"0");
}

// ── Tiny components ──────────────────────────────────────────────────────────

function Card(props) {
  var style = Object.assign(
    { background:"#111", border:"1px solid #1e1e1e", borderRadius:8, padding:16 },
    props.borderColor ? { borderLeft:"3px solid " + props.borderColor } : {},
    props.style || {}
  );
  return React.createElement("div", { style: style }, props.children);
}

function Label(props) {
  var style = Object.assign(
    { fontSize:9, letterSpacing:2.5, color:"#555", textTransform:"uppercase", marginBottom:10 },
    props.style || {}
  );
  return React.createElement("div", { style: style }, props.children);
}

function Btn(props) {
  var style = Object.assign(
    { background:"#c8ff00", color:"#000", border:"none", borderRadius:6, padding:"10px 20px",
      fontFamily:"'Courier New',monospace", fontSize:11, fontWeight:700, cursor:"pointer",
      letterSpacing:1, width:"100%" },
    props.style || {}
  );
  return React.createElement("button", { onClick: props.onClick, style: style }, props.children);
}

function GhostBtn(props) {
  return React.createElement("button", {
    onClick: props.onClick,
    style: { background:"none", border:"1px solid #333", color:"#888",
      fontFamily:"'Courier New',monospace", fontSize:10, borderRadius:4,
      padding:"4px 10px", cursor:"pointer" }
  }, props.children);
}

function SmallBtn(props) {
  return React.createElement("button", {
    onClick: props.onClick,
    style: { background:"#c8ff00", color:"#000", border:"none", borderRadius:4,
      padding:"6px 14px", fontFamily:"'Courier New',monospace", fontSize:11,
      fontWeight:700, cursor:"pointer" }
  }, props.children);
}

function CheckBox(props) {
  return React.createElement("div", {
    style: { width:18, height:18, borderRadius:4, flexShrink:0, display:"flex",
      alignItems:"center", justifyContent:"center",
      background: props.on ? "#c8ff00" : "transparent",
      border: props.on ? "none" : "2px solid #444" }
  }, props.on ? React.createElement("span", { style:{ fontSize:11, color:"#000", fontWeight:700 } }, "OK") : null);
}

function Rail(props) {
  return React.createElement("div", { style:{ width:80, height:3, background:"#1a1a1a", marginTop:5, borderRadius:2 } },
    React.createElement("div", { style:{ width: props.pct + "%", height:"100%", background:"#c8ff00", borderRadius:2 } })
  );
}

// ── Styles object ─────────────────────────────────────────────────────────────
var S = {
  root:     { background:"#0a0a0a", color:"#e8e8e8", minHeight:"100vh", fontFamily:"'Courier New',monospace" },
  header:   { display:"flex", justifyContent:"space-between", alignItems:"flex-end", padding:"18px 20px 12px", borderBottom:"1px solid #1a1a1a", background:"#0d0d0d" },
  tabBar:   { display:"flex", gap:2, padding:"6px 14px", background:"#0d0d0d", borderBottom:"1px solid #141414", overflowX:"auto" },
  tab:      { background:"none", border:"none", color:"#555", fontFamily:"'Courier New',monospace", fontSize:10, letterSpacing:1.5, cursor:"pointer", padding:"5px 9px", borderRadius:4, whiteSpace:"nowrap" },
  tabOn:    { background:"#161616", color:"#c8ff00", border:"1px solid #222" },
  body:     { padding:"14px 18px", maxWidth:640, margin:"0 auto", display:"flex", flexDirection:"column", gap:12, paddingBottom:60 },
  inp:      { background:"#0a0a0a", border:"1px solid #2a2a2a", borderRadius:4, padding:"6px 8px", color:"#fff", fontFamily:"'Courier New',monospace", fontSize:12, outline:"none", width:72 },
  recentRow:{ display:"flex", gap:12, alignItems:"baseline", padding:"6px 0", borderBottom:"1px solid #151515", flexWrap:"wrap" },
  alertCard:{ background:"#111", border:"1px solid #1e1e1e", borderRadius:8, padding:14, marginBottom:8, cursor:"pointer" },
  table:    { display:"grid", gridTemplateColumns:"1fr 65px 65px 60px", gap:"3px 0", marginTop:4 },
  th:       { fontSize:9, color:"#555", letterSpacing:1, paddingBottom:4, borderBottom:"1px solid #1e1e1e", textAlign:"right" },
  td:       { fontSize:12, color:"#666", padding:"4px 0", textAlign:"right", borderBottom:"1px solid #141414" },
  mGrid:    { display:"grid", gridTemplateColumns:"repeat(3,1fr)", gap:8, marginTop:10 },
};

// ── NutritionTab ──────────────────────────────────────────────────────────────
function NutritionTab(props) {
  var todayNut = (props.data.nutrition || {})[TODAY] || {};
  var calState  = useState(todayNut.cal  ? String(todayNut.cal)  : "");
  var protState = useState(todayNut.prot ? String(todayNut.prot) : "");
  var cal  = calState[0],  setCal  = calState[1];
  var prot = protState[0], setProt = protState[1];

  var meals = [
    { t:"MORNING",     items:["Protein milkshake (whey + milk)","2-3 eggs"] },
    { t:"MIDDAY",      items:["80/20 beef or chicken + brown rice + veggies","Or: chicken + sweet potato + spinach"] },
    { t:"DINNER",      items:["Steak or chicken + sweet potato / rice","Onion, veggies, extra egg if hungry"] },
    { t:"DR. ADD-ONS", items:["Spinach or kale into 3 meals/week","Extra milk if calories feel low"] },
  ];

  return React.createElement("div", { style:{ display:"flex", flexDirection:"column", gap:12 } },
    React.createElement(Card, { style:{ background:"#0f1a0a", border:"1px solid #1e3a1e" } },
      React.createElement(Label, null, "DAILY TARGETS"),
      React.createElement("div", { style:{ display:"flex", gap:12, flexWrap:"wrap", marginTop:6 } },
        React.createElement("div", { style:{ flex:"1 1 60px" } },
          React.createElement("div", { style:{ fontSize:9, letterSpacing:1.5, color:"#444" } }, "CALORIES"),
          React.createElement("div", { style:{ fontSize:16, fontWeight:700, color:"#c8ff00", marginTop:2 } }, "2400-2550")
        ),
        React.createElement("div", { style:{ flex:"1 1 60px" } },
          React.createElement("div", { style:{ fontSize:9, letterSpacing:1.5, color:"#444" } }, "PROTEIN"),
          React.createElement("div", { style:{ fontSize:16, fontWeight:700, color:"#c8ff00", marginTop:2 } }, "120-150g")
        ),
        React.createElement("div", { style:{ flex:"1 1 60px" } },
          React.createElement("div", { style:{ fontSize:9, letterSpacing:1.5, color:"#444" } }, "TRUE TDEE"),
          React.createElement("div", { style:{ fontSize:16, fontWeight:700, color:"#e8a020", marginTop:2 } }, "~2250")
        )
      ),
      React.createElement("div", { style:{ fontSize:10, color:"#556", marginTop:8 } }, "Garmin overestimates 10-15%. Surplus +200-300. Gain <1 lb/wk.")
    ),
    React.createElement(Card, null,
      React.createElement(Label, null, "LOG TODAY"),
      React.createElement("div", { style:{ display:"flex", gap:8, alignItems:"flex-end" } },
        React.createElement("div", { style:{ flex:1 } },
          React.createElement("div", { style:{ fontSize:9, color:"#555", marginBottom:3 } }, "CALORIES"),
          React.createElement("input", { type:"number", value:cal, onChange:function(e){ setCal(e.target.value); }, placeholder:"2450", style:{ ...S.inp, width:"100%" } })
        ),
        React.createElement("div", { style:{ flex:1 } },
          React.createElement("div", { style:{ fontSize:9, color:"#555", marginBottom:3 } }, "PROTEIN (g)"),
          React.createElement("input", { type:"number", value:prot, onChange:function(e){ setProt(e.target.value); }, placeholder:"140", style:{ ...S.inp, width:"100%" } })
        ),
        React.createElement(SmallBtn, { onClick:function(){ props.saveNutrition(cal, prot); } }, "LOG")
      )
    ),
    React.createElement(Card, null,
      React.createElement(Label, null, "MEAL STRUCTURE"),
      meals.map(function(m) {
        return React.createElement("div", { key:m.t, style:{ marginBottom:10 } },
          React.createElement("div", { style:{ fontSize:10, color:"#c8ff00", letterSpacing:2, marginBottom:3 } }, m.t),
          m.items.map(function(item, i) {
            return React.createElement("div", { key:i, style:{ fontSize:12, color:"#999", paddingLeft:10 } }, "— " + item);
          })
        );
      })
    ),
    React.createElement(Card, null,
      React.createElement(Label, null, "NUTRITION LOG"),
      Object.keys(props.data.nutrition).length === 0
        ? React.createElement("div", { style:{ color:"#444", fontSize:12 } }, "No logs yet.")
        : Object.entries(props.data.nutrition).sort(function(a,b){ return b[0].localeCompare(a[0]); }).slice(0,7).map(function(entry) {
            var date = entry[0], n = entry[1];
            return React.createElement("div", { key:date, style:S.recentRow },
              React.createElement("span", { style:{ color:"#555", fontSize:11, minWidth:90 } }, date),
              React.createElement("span", { style:{ color:"#ddd", fontSize:12 } }, n.cal + " kcal"),
              React.createElement("span", { style:{ color:"#c8ff00", fontSize:11 } }, n.prot + "g protein")
            );
          })
    )
  );
}

// ── Main App ──────────────────────────────────────────────────────────────────
function App() {
  var dataState    = useState(null);
  var data         = dataState[0];
  var setData      = dataState[1];

  var tabState     = useState("dashboard");
  var tab          = tabState[0];
  var setTab       = tabState[1];

  var sessState    = useState(null);
  var session      = sessState[0];
  var setSession   = sessState[1];

  var alertState   = useState(null);
  var openAlert    = alertState[0];
  var setOpenAlert = alertState[1];

  var mFormState   = useState(false);
  var mForm        = mFormState[0];
  var setMForm     = mFormState[1];

  var mInputState  = useState({});
  var mInput       = mInputState[0];
  var setMInput    = mInputState[1];

  // LOAD
  useEffect(function() {
    try {
      var stored = localStorage.getItem(SK);
      setData(stored ? JSON.parse(stored) : freshData());
    } catch(e) {
      setData(freshData());
    }
  }, []);

  // SAVE
  function save(nd) {
    setData(nd);
    try { localStorage.setItem(SK, JSON.stringify(nd)); }
    catch(e) { alert("Storage full! Export a backup first."); }
  }

  if (!data) {
    return React.createElement("div", {
      style:{ background:"#0a0a0a", color:"#fff", height:"100vh", display:"flex",
        alignItems:"center", justifyContent:"center", fontFamily:"monospace" }
    }, "Loading...");
  }

  // ── Streak helper ──
  function streak(id) {
    var s = 0;
    var d = new Date();
    d.setHours(0,0,0,0);
    for (var i = 0; i < 90; i++) {
      var k = fmtDate(d);
      if (data.checks[k] && data.checks[k][id]) {
        s++;
        d.setDate(d.getDate()-1);
      } else {
        if (i === 0) { d.setDate(d.getDate()-1); continue; }
        break;
      }
    }
    return s;
  }

  var todayChecks = data.checks[TODAY] || {};
  var todaySupps  = data.supps[TODAY]  || {};
  var todayWkt    = data.workouts[TODAY];
  var nextDayObj  = MENTZER.find(function(d){ return d.id === data.nextDay; }) || MENTZER[0];
  var latestM     = data.measures[data.measures.length-1] || {};

  // ── Actions ──
  function toggleCheck(id) {
    var day = Object.assign({}, todayChecks);
    day[id] = !day[id];
    save(Object.assign({}, data, { checks: Object.assign({}, data.checks, { [TODAY]: day }) }));
  }

  function toggleSupp(name) {
    var day = Object.assign({}, todaySupps);
    day[name] = !day[name];
    save(Object.assign({}, data, { supps: Object.assign({}, data.supps, { [TODAY]: day }) }));
  }

  function startSession(dayId) {
    setSession({ dayId: dayId, logs: {} });
  }

  function logEx(name, field, val) {
    setSession(function(prev) {
      var logs = Object.assign({}, prev.logs);
      logs[name] = Object.assign({}, logs[name] || {}, { [field]: val });
      return Object.assign({}, prev, { logs: logs });
    });
  }

  function markDone(name) {
    var ex = session.logs[name] || {};
    if (!ex.lbs && !ex.reps) return;
    setSession(function(prev) {
      var logs = Object.assign({}, prev.logs);
      logs[name] = Object.assign({}, logs[name], { done: true });
      return Object.assign({}, prev, { logs: logs });
    });
  }

  function saveSession() {
    var logs = Object.entries(session.logs)
      .filter(function(e){ return e[1].done; })
      .map(function(e){ return { name: e[0], lbs: parseFloat(e[1].lbs)||0, reps: e[1].reps||"" }; });
    var rot = ["d1","d2","d3","d4"];
    var next = rot[(rot.indexOf(session.dayId)+1) % 4];
    var newWorkouts = Object.assign({}, data.workouts, { [TODAY]: { dayId: session.dayId, logs: logs } });
    save(Object.assign({}, data, { workouts: newWorkouts, nextDay: next }));
    setSession(null);
  }

  function saveMeasure() {
    var entry = { date: TODAY };
    MFIELDS.forEach(function(f) {
      if (mInput[f.id]) entry[f.id] = parseFloat(mInput[f.id]);
    });
    save(Object.assign({}, data, { measures: data.measures.concat([entry]) }));
    setMInput({});
    setMForm(false);
  }

  function saveNutrition(cal, prot) {
    var newNut = Object.assign({}, data.nutrition, { [TODAY]: { cal: parseFloat(cal)||0, prot: parseFloat(prot)||0 } });
    save(Object.assign({}, data, { nutrition: newNut }));
  }

  function exportData() {
    var blob = new Blob([JSON.stringify(data, null, 2)], { type:"application/json" });
    var a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "health-backup-" + TODAY + ".json";
    a.click();
  }

  function importData(e) {
    var file = e.target.files[0];
    if (!file) return;
    var reader = new FileReader();
    reader.onload = function(ev) {
      try {
        save(JSON.parse(ev.target.result));
        alert("Restored successfully!");
      } catch(err) {
        alert("Invalid backup file.");
      }
    };
    reader.readAsText(file);
  }

  var TABS = ["dashboard","workout","nutrition","body","doctor","backup"];

  // ── RENDER ────────────────────────────────────────────────────────────────
  return React.createElement("div", { style: S.root },

    // HEADER
    React.createElement("div", { style: S.header },
      React.createElement("div", null,
        React.createElement("div", { style:{ fontSize:9, letterSpacing:3, color:"#555", textTransform:"uppercase" } }, "HEALTH PROJECT"),
        React.createElement("div", { style:{ fontSize:20, fontWeight:700, color:"#fff", letterSpacing:-0.5, marginTop:2 } }, "OPERATOR")
      ),
      React.createElement("div", { style:{ textAlign:"right" } },
        React.createElement("div", { style:{ fontSize:12, color:"#c8ff00", fontWeight:700 } },
          "DAY ", DOY, React.createElement("span", { style:{ color:"#444", fontWeight:400 } }, "/365")
        ),
        React.createElement(Rail, { pct: (DOY/365)*100 })
      )
    ),

    // TABS
    React.createElement("div", { style: S.tabBar },
      TABS.map(function(t) {
        var label = t === "doctor" ? "DR" : t === "backup" ? "BACKUP" : t.toUpperCase();
        return React.createElement("button", {
          key: t,
          onClick: function() { setTab(t); if (t !== "workout") setSession(null); },
          style: Object.assign({}, S.tab, tab === t ? S.tabOn : {})
        }, label);
      })
    ),

    // BODY
    React.createElement("div", { style: S.body },

      // ═══════════════════ DASHBOARD ═══════════════════
      tab === "dashboard" && React.createElement("div", { style:{ display:"flex", flexDirection:"column", gap:12 } },

        // Next session
        React.createElement(Card, { borderColor: nextDayObj.color },
          React.createElement(Label, null, "NEXT SESSION"),
          React.createElement("div", { style:{ display:"flex", alignItems:"center", gap:12 } },
            React.createElement("div", null,
              React.createElement("div", { style:{ fontSize:21, fontWeight:700, color:nextDayObj.color } }, nextDayObj.label),
              React.createElement("div", { style:{ fontSize:10, color:"#555", marginTop:2 } }, nextDayObj.muscle)
            ),
            todayWkt
              ? React.createElement("div", { style:{ background:"#1a2a0a", color:"#8aff00", fontSize:11, padding:"4px 10px", borderRadius:4, fontWeight:600 } }, "DONE TODAY")
              : React.createElement(Btn, { onClick:function(){ setTab("workout"); startSession(nextDayObj.id); }, style:{ width:"auto", padding:"8px 18px" } }, "START")
          )
        ),

        // Checklist
        React.createElement(Card, null,
          React.createElement(Label, null, "TONIGHT'S CHECKLIST"),
          CHECKS.map(function(c) {
            var on = todayChecks[c.id];
            return React.createElement("div", {
              key: c.id,
              onClick: function() { toggleCheck(c.id); },
              style: { display:"flex", alignItems:"center", gap:12, padding:"10px 12px",
                borderRadius:6, cursor:"pointer", marginBottom:3,
                background: on ? "#111a0a" : "#0f0f0f",
                border: "1px solid " + (on ? "#2a4a0a" : "#1a1a1a") }
            },
              React.createElement(CheckBox, { on: on }),
              React.createElement("div", { style:{ display:"flex", flexDirection:"column", gap:1 } },
                React.createElement("span", { style:{ color: on ? "#8aff00" : "#bbb", fontSize:13 } }, c.label),
                React.createElement("span", { style:{ fontSize:10, color: (c.id==="stretch"||c.id==="bible") ? "#c8ff00" : "#555", marginTop:2 } },
                  c.sub + (c.id==="stretch"||c.id==="bible" ? "  " + streak(c.id) + " day streak" : "")
                )
              )
            );
          })
        ),

        // Supplements
        React.createElement(Card, null,
          React.createElement(Label, null, "SUPPLEMENTS"),
          React.createElement("div", { style:{ display:"flex", flexWrap:"wrap", gap:6 } },
            SUPPS.map(function(s) {
              var on = todaySupps[s];
              return React.createElement("div", {
                key: s,
                onClick: function() { toggleSupp(s); },
                style: { padding:"5px 10px", borderRadius:4, cursor:"pointer", display:"flex",
                  alignItems:"center", gap:5,
                  background: on ? "#111a0a" : "#0f0f0f",
                  border: "1px solid " + (on ? "#2a4a0a" : "#1a1a1a") }
              },
                React.createElement("span", { style:{ color: on ? "#c8ff00" : "transparent", fontSize:10 } }, "OK"),
                React.createElement("span", { style:{ color: on ? "#8aff00" : "#666", fontSize:11 } }, s)
              );
            })
          )
        ),

        // Stats
        React.createElement("div", { style:{ display:"flex", gap:12, flexWrap:"wrap", marginTop:6 } },
          [
            { l:"WEIGHT",  v: (latestM.weight || 186) + " lbs", c:"#fff" },
            { l:"STRETCH", v: streak("stretch") + "d streak",   c:"#c8ff00" },
            { l:"BIBLE",   v: streak("bible") + "d streak",     c:"#c8ff00" },
            { l:"NEXT",    v: nextDayObj.label,                  c: nextDayObj.color },
          ].map(function(s) {
            return React.createElement("div", { key:s.l, style:{ flex:"1 1 60px" } },
              React.createElement("div", { style:{ fontSize:9, letterSpacing:1.5, color:"#444" } }, s.l),
              React.createElement("div", { style:{ fontSize:16, fontWeight:700, color:s.c, marginTop:2 } }, s.v)
            );
          })
        ),

        // Active alerts
        React.createElement(Card, null,
          React.createElement(Label, null, "ACTIVE ALERTS"),
          DR_ALERTS.filter(function(a){ return a.sev === "warn"; }).map(function(a) {
            return React.createElement("div", {
              key: a.id,
              onClick: function() { setTab("doctor"); setOpenAlert(a.id); },
              style: { display:"flex", justifyContent:"space-between", alignItems:"center",
                padding:"7px 10px", background:"#111", borderRadius:4, marginBottom:3,
                borderLeft:"3px solid #e8a020", cursor:"pointer" }
            },
              React.createElement("span", { style:{ fontSize:12, color:"#e8a020", fontWeight:600 } }, "WARN: " + a.title),
              React.createElement("span", { style:{ color:"#5daaff", fontSize:10 } }, "View >")
            );
          })
        )

      ), // end dashboard

      // ═══════════════════ WORKOUT ═══════════════════
      tab === "workout" && React.createElement("div", { style:{ display:"flex", flexDirection:"column", gap:12 } },

        !session && React.createElement("div", { style:{ display:"flex", flexDirection:"column", gap:12 } },
          React.createElement(Card, null,
            React.createElement(Label, null, "SELECT SESSION"),
            React.createElement("div", { style:{ display:"flex", flexDirection:"column", gap:6 } },
              MENTZER.map(function(d) {
                return React.createElement("div", {
                  key: d.id,
                  onClick: function() { startSession(d.id); },
                  style: { display:"flex", alignItems:"center", gap:10, padding:"10px 12px",
                    borderRadius:6, cursor:"pointer",
                    borderLeft: "3px solid " + d.color,
                    background: d.id === data.nextDay ? "#161616" : "#0f0f0f" }
                },
                  React.createElement("span", { style:{ color:d.color, fontWeight:700, fontSize:14 } }, d.label),
                  React.createElement("span", { style:{ color:"#666", fontSize:11 } }, d.muscle),
                  d.id === data.nextDay && React.createElement("span", { style:{ color:"#c8ff00", fontSize:10, marginLeft:"auto" } }, "NEXT UP")
                );
              })
            )
          ),

          React.createElement(Card, null,
            React.createElement(Label, null, "RECENT SESSIONS"),
            Object.keys(data.workouts).length === 0
              ? React.createElement("div", { style:{ color:"#444", fontSize:12 } }, "No sessions logged yet.")
              : Object.entries(data.workouts).sort(function(a,b){ return b[0].localeCompare(a[0]); }).slice(0,6).map(function(entry) {
                  var date = entry[0], w = entry[1];
                  var d = MENTZER.find(function(m){ return m.id === w.dayId; });
                  return React.createElement("div", { key:date, style:S.recentRow },
                    React.createElement("span", { style:{ color:"#555", fontSize:11, minWidth:90 } }, date),
                    React.createElement("span", { style:{ color: d ? d.color : "#aaa", fontSize:12, fontWeight:600 } }, d ? d.label : ""),
                    React.createElement("span", { style:{ color:"#444", fontSize:10 } }, (d ? d.muscle : "") + " - " + w.logs.length + " exercises")
                  );
                })
          )
        ),

        session && (function() {
          var day = MENTZER.find(function(d){ return d.id === session.dayId; });
          if (!day) return null;
          return React.createElement("div", { style:{ display:"flex", flexDirection:"column", gap:12 } },
            React.createElement(Card, { borderColor: day.color },
              React.createElement("div", { style:{ display:"flex", alignItems:"center", gap:12 } },
                React.createElement("div", { style:{ flex:1 } },
                  React.createElement("div", { style:{ fontSize:21, fontWeight:700, color:day.color } }, day.label + " — TO FAILURE"),
                  React.createElement("div", { style:{ fontSize:10, color:"#555", marginTop:2 } }, day.muscle + " - 1 set - 96h rest after")
                ),
                React.createElement(GhostBtn, { onClick:function(){ setSession(null); } }, "CANCEL")
              )
            ),
            day.exercises.map(function(ex, i) {
              var log  = session.logs[ex.name] || {};
              var done = log.done;
              return React.createElement(Card, {
                key: i,
                style: { opacity: done ? 0.6 : 1, border: "1px solid " + (done ? "#2a4a0a" : "#1e1e1e") }
              },
                React.createElement("div", null,
                  React.createElement("div", { style:{ fontSize:14, color: done ? "#8aff00" : "#e0e0e0", fontWeight:600 } },
                    (done ? "DONE  " : "") + ex.name
                  ),
                  React.createElement("div", { style:{ fontSize:10, color:"#555", marginTop:2 } },
                    "Reps: " + ex.repRange + "   Prev: " + ex.prev
                  ),
                  ex.flag && React.createElement("div", { style:{ fontSize:10, color:"#e8a020", marginTop:3 } }, ex.flag)
                ),
                !done && React.createElement("div", { style:{ display:"flex", gap:6, marginTop:10, alignItems:"center" } },
                  React.createElement("input", { type:"number", placeholder:"lbs",  value:log.lbs||"",  onChange:function(e){ logEx(ex.name,"lbs",e.target.value); },  style:S.inp }),
                  React.createElement("input", { type:"number", placeholder:"reps", value:log.reps||"", onChange:function(e){ logEx(ex.name,"reps",e.target.value); }, style:S.inp }),
                  React.createElement(SmallBtn, { onClick:function(){ markDone(ex.name); } }, "DONE")
                ),
                done && React.createElement("div", { style:{ fontSize:13, color:"#c8ff00", fontWeight:700, marginTop:6 } }, log.lbs + " lbs x " + log.reps + " reps")
              );
            }),
            React.createElement(Btn, { onClick: saveSession }, "SAVE SESSION")
          );
        })()

      ), // end workout

      // ═══════════════════ NUTRITION ═══════════════════
      tab === "nutrition" && React.createElement(NutritionTab, { data:data, saveNutrition:saveNutrition }),

      // ═══════════════════ BODY ═══════════════════
      tab === "body" && React.createElement("div", { style:{ display:"flex", flexDirection:"column", gap:12 } },

        React.createElement(Card, { style:{ background:"#0f1a0a", border:"1px solid #1e3a1e" } },
          React.createElement(Label, null, "BODY COMP TARGET"),
          React.createElement("div", { style:{ fontSize:12, color:"#999", lineHeight:1.7 } },
            React.createElement("div", null, React.createElement("span", { style:{ color:"#c8ff00" } }, "Phase: "), "Slow Bulk — Bodybuilding size"),
            React.createElement("div", null, React.createElement("span", { style:{ color:"#c8ff00" } }, "Target: "), "LBM 165 lbs at 15% BF = 194 lbs total"),
            React.createElement("div", null, React.createElement("span", { style:{ color:"#c8ff00" } }, "Rate: "), "<1 lb/week gain. Weigh every AM fasted.")
          )
        ),

        React.createElement(Card, null,
          React.createElement("div", { style:{ display:"flex", alignItems:"center", gap:12 } },
            React.createElement(Label, { style:{ marginBottom:0 } }, "ADD MEASUREMENTS"),
            React.createElement(GhostBtn, { onClick:function(){ setMForm(!mForm); } }, mForm ? "Close" : "+ Add")
          ),
          mForm && React.createElement("div", null,
            React.createElement("div", { style:S.mGrid },
              MFIELDS.map(function(f) {
                return React.createElement("div", { key:f.id },
                  React.createElement("div", { style:{ fontSize:9, color:"#555", marginBottom:2 } }, f.label + " (" + f.unit + ")"),
                  React.createElement("input", {
                    type:"number",
                    placeholder: String(f.base),
                    value: mInput[f.id] || "",
                    onChange: function(e) {
                      var val = e.target.value;
                      setMInput(function(p){ return Object.assign({}, p, { [f.id]: val }); });
                    },
                    style: S.inp
                  })
                );
              })
            ),
            React.createElement(Btn, { onClick:saveMeasure, style:{ marginTop:10 } }, "SAVE ENTRY")
          )
        ),

        React.createElement(Card, null,
          React.createElement(Label, null, "PROGRESS vs BASELINE (11/27/25)"),
          React.createElement("div", { style:S.table },
            ["","BASE","NOW","DELTA"].map(function(h) {
              return React.createElement("div", { key:h, style:S.th }, h);
            }),
            MFIELDS.map(function(f) {
              var latest = data.measures.slice().reverse().find(function(m){ return m[f.id] != null; });
              var latestVal = latest ? latest[f.id] : null;
              var delta = latestVal != null ? parseFloat(latestVal) - f.base : null;
              var isWaist = f.id === "waist";
              var dColor = delta === null ? "#444" : delta > 0 ? (isWaist ? "#e85d3a" : "#c8ff00") : (isWaist ? "#c8ff00" : "#e85d3a");
              var cells = [f.label, f.base || "—", latestVal != null ? latestVal : "—", delta !== null ? (delta > 0 ? "+" + delta.toFixed(1) : delta.toFixed(1)) : "—"];
              return cells.map(function(v, i) {
                return React.createElement("div", {
                  key: f.id + "-" + i,
                  style: Object.assign({}, S.td, i===2 ? { color:"#fff", fontWeight:600 } : {}, i===3 ? { color:dColor } : {})
                }, v);
              });
            })
          )
        ),

        React.createElement(Card, null,
          React.createElement(Label, null, "ALL ENTRIES"),
          data.measures.slice().reverse().map(function(m, i) {
            return React.createElement("div", { key:i, style:S.recentRow },
              React.createElement("span", { style:{ color:"#555", fontSize:11, minWidth:90 } }, m.date),
              React.createElement("span", { style:{ color:"#aaa", fontSize:11 } },
                (m.weight ? m.weight + "lbs" : "") +
                (m.arm    ? "  Arms:" + m.arm + '"' : "") +
                (m.chest  ? "  Chest:" + m.chest + '"' : "") +
                (m.waist  ? "  Waist:" + m.waist + '"' : "") +
                (m.legs   ? "  Legs:" + m.legs + '"' : "")
              )
            );
          })
        )

      ), // end body

      // ═══════════════════ DOCTOR ═══════════════════
      tab === "doctor" && React.createElement("div", { style:{ display:"flex", flexDirection:"column", gap:12 } },

        React.createElement(Card, { style:{ background:"#0a0f1a", border:"1px solid #1a2a4a" } },
          React.createElement(Label, null, "YOUR PROFILE"),
          React.createElement("div", { style:{ fontSize:12, color:"#999", lineHeight:1.8 } },
            React.createElement("div", null, React.createElement("strong", { style:{ color:"#ddd" } }, "Build "), "5'10  186 lbs  Est. 18-20% BF  Filipino / American"),
            React.createElement("div", null, React.createElement("strong", { style:{ color:"#ddd" } }, "Phase "), "Slow Bulk — bodybuilding size + moderate strength"),
            React.createElement("div", null, React.createElement("strong", { style:{ color:"#ddd" } }, "Program "), "Mentzer HIT  1 set to failure  96h rest"),
            React.createElement("div", null, React.createElement("strong", { style:{ color:"#ddd" } }, "Diet "), "Meat-heavy  eggs  milk  low-GI carbs  140-180g protein"),
            React.createElement("div", null, React.createElement("strong", { style:{ color:"#ddd" } }, "Supps "), "Creatine  Zinc  VitD  MgGly  Omega-3")
          )
        ),

        DR_ALERTS.map(function(a) {
          var isOpen = openAlert === a.id;
          return React.createElement("div", {
            key: a.id,
            onClick: function() { setOpenAlert(isOpen ? null : a.id); },
            style: Object.assign({}, S.alertCard, { borderLeft: "3px solid " + (a.sev === "warn" ? "#e8a020" : "#5daaff") })
          },
            React.createElement("div", { style:{ display:"flex", alignItems:"center", gap:12 } },
              React.createElement("span", { style:{ fontSize:13, color: a.sev==="warn" ? "#e8a020" : "#5daaff", fontWeight:600, flex:1 } },
                (a.sev === "warn" ? "WARN: " : "INFO: ") + a.title
              ),
              React.createElement("span", { style:{ color:"#555", fontSize:11 } }, isOpen ? "close" : "expand")
            ),
            isOpen && React.createElement("div", { style:{ fontSize:12, color:"#999", marginTop:8, lineHeight:1.6 } }, a.body)
          );
        }),

        React.createElement(Card, null,
          React.createElement(Label, null, "WEEKLY PROTOCOL"),
          [
            "Weigh every morning fasted — same time.",
            "Full measurements every 2 weeks.",
            "Blood panel every 3 months: uric acid, testosterone, VitD, iron.",
            "Sprint or jump session 1-2x on rest days (never back-to-back).",
            "Spinach or kale into 3 meals this week.",
            "Day 3 DB Press is #1 priority. Log weight. Progress it.",
            "Farmer carries or wrist curls on rest days — unlock your deadlift.",
          ].map(function(item, i) {
            return React.createElement("div", { key:i, style:{ fontSize:12, color:"#999", padding:"6px 0", borderBottom:"1px solid #141414" } }, item);
          })
        )

      ), // end doctor

      // ═══════════════════ BACKUP ═══════════════════
      tab === "backup" && React.createElement("div", { style:{ display:"flex", flexDirection:"column", gap:12 } },

        React.createElement(Card, { style:{ background:"#1a0f0a", border:"1px solid #3a2a1a" } },
          React.createElement(Label, null, "IMPORTANT"),
          React.createElement("div", { style:{ fontSize:12, color:"#e8a020", lineHeight:1.7 } },
            "Data lives in THIS browser only.", React.createElement("br"),
            "Clearing browser data = lose everything.", React.createElement("br"),
            "Export weekly. Save to Google Drive."
          )
        ),

        React.createElement(Card, null,
          React.createElement(Label, null, "EXPORT BACKUP"),
          React.createElement(Btn, { onClick:exportData }, "DOWNLOAD BACKUP FILE"),
          React.createElement("div", { style:{ fontSize:10, color:"#555", marginTop:8 } }, "Saves health-backup-" + TODAY + ".json")
        ),

        React.createElement(Card, null,
          React.createElement(Label, null, "RESTORE FROM BACKUP"),
          React.createElement("input", { type:"file", accept:".json", onChange:importData, id:"imp", style:{ display:"none" } }),
          React.createElement(Btn, {
            onClick: function() { document.getElementById("imp").click(); },
            style: { background:"#333", color:"#ccc" }
          }, "CHOOSE BACKUP FILE"),
          React.createElement("div", { style:{ fontSize:10, color:"#c00", marginTop:8 } }, "WARNING: This overwrites all current data.")
        )

      ) // end backup

    ) // end body div
  ); // end root
}

ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));
</script>
</body>
</html>
